{"version":3,"sources":["/home/mrsmith/workspace/angular-4/sp/src/app/parents/parent.component.css","/home/mrsmith/workspace/angular-4/sp/src/app/parents/parent.component.html","/home/mrsmith/workspace/angular-4/sp/src/app/parents/parent.component.ts","/home/mrsmith/workspace/angular-4/sp/src/app/parents/parents.module.ts"],"names":[],"mappings":"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","file":"parents.module.chunk.js","sourcesContent":["exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/mrsmith/workspace/angular-4/sp/src/app/parents/parent.component.css\n// module id = ../../../../../src/app/parents/parent.component.css\n// module chunks = parents.module","module.exports = \"<div class=\\\"wrapper\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-md-10 col-md-offset-1\\\">\\n      <div class=\\\"panel\\\">\\n        <div class=\\\"panel-heading\\\">\\n          <h1>Parents</h1>\\n        </div>\\n        <div class=\\\"panel-body\\\">\\n          <ul class=\\\"team-list cycle-pager external\\\">\\n            <li *ngFor=\\\"let parent of filterdParents$ | async\\\">\\n              <a [routerLink]=\\\"['/profile', parent.objectId]\\\">\\n                <span class=\\\"thumb-small\\\">\\n                  <img class=\\\"circle\\\" src=\\\"{{parent.avatar}}\\\" alt=\\\"\\\">\\n                </span>\\n                <span class=\\\"name\\\">\\n                  {{parent.firstName}} {{parent.lastName}}\\n                </span>\\n              </a>\\n            </li>\\n          </ul>\\n        </div>\\n        <div class=\\\"panel-footer\\\">\\n          <md-paginator\\n            (page)=\\\"changePage($event)\\\"\\n            [length]=\\\"(parentsCount$ | async)\\\"\\n            [pageSize]=\\\"perPage\\\"\\n            [pageSizeOptions]=\\\"[5, 10, 25, 100]\\\">\\n          </md-paginator>\\n          <!-- <sp-pager [perPage]=\\\"perPage\\\" [totalCount]=\\\"(parentsCount$ | async)\\\" [allItems]=\\\"(parents$ | async)\\\" (currentPage)=\\\"goToPage($event)\\\" ></sp-pager> -->\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/mrsmith/workspace/angular-4/sp/src/app/parents/parent.component.html\n// module id = ../../../../../src/app/parents/parent.component.html\n// module chunks = parents.module","import { Component, OnInit, ChangeDetectionStrategy, OnChanges, SimpleChanges, AfterViewInit } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { Observable } from 'rxjs/Rx';\nimport * as _ from 'lodash';\n\nimport { IUser } from './../model/IUser';\nimport { AppState } from './../message/message-state';\nimport { GetUserCountActions } from './../services/user.service';\n\n@Component({\n  selector: 'sp-parent',\n  templateUrl: './parent.component.html',\n  styleUrls: ['./parent.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ParentComponent implements OnInit, OnChanges, AfterViewInit {\n\n  parents$: Observable<IUser[]>;\n  parentsCount$: Observable<number>;\n\n  parents: IUser[] = [];\n\n  perPage = 5;\n  page = 1;\n\n  pageObj: Observable<{\n    pageIndex: number;\n    length: number;\n    pageSize: number;\n  }>;\n\n  initPageObj: {\n    pageIndex: number;\n    length: number;\n    pageSize: number;\n  } = {\n    pageIndex: 0,\n    length: 0,\n    pageSize: this.perPage\n  };\n\n  filterdParents$: Observable<IUser[]>;\n\n  constructor(private store: Store<AppState>) {\n  }\n\n  ngOnInit() {\n    this.parents$ = this.store\n      .select(state => _.values(state.dataState.users.parents))\n      .filter(p => p.length > 0);\n    this.parentsCount$ = this.store.select(\n      state => state.uiState.totalCounts.parentCount\n    );\n    this.store.dispatch(new GetUserCountActions('parent'));\n\n    this.pageObj = Observable.of(this.initPageObj);\n    this.filterdParents$ = this.parents$.filter(p => p !== undefined).map(parents => parents.slice(\n      (this.perPage * this.page) - this.perPage, (this.perPage * this.page)\n    ));\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    // console.log('ngOnChanges', changes);\n  }\n\n  ngAfterViewInit() {\n    // console.log('ngAfterViewInit');\n  }\n\n  changePage(page) {\n    console.log(page);\n    this.page = page.pageIndex + 1;\n    this.perPage = page.pageSize;\n    this.paginate(this.page, this.perPage);\n  }\n\n  paginate(page: number, perPage: number) {\n    this.filterdParents$ = this.parents$.filter(p => p !== undefined).map(parents => parents.slice(\n      (perPage * page) - this.perPage, (this.perPage * page)\n    ));\n  }\n\n  goToPage(page: number) {\n    // console.log(page);\n    let shouldLoadMore: boolean;\n    this.parents$.map(p => {\n      // console.log(p, page * this.perPage);\n      if (p.length < page * this.perPage) {\n        shouldLoadMore = true;\n      } else {\n        shouldLoadMore = false;\n      }\n      return { shouldLoadMore: shouldLoadMore, parents: p };\n    }).subscribe(\n      sl => {\n        const start = page * this.perPage;\n        const startIndex = start - this.perPage;\n        const end = start + this.perPage;\n        const endIndex = startIndex + this.perPage;\n\n        console.log(start, startIndex, end, endIndex);\n\n        this.parents = sl.parents.slice(startIndex, endIndex);\n\n        // if (sl.shouldLoadMore) {\n        // } else {\n        //   this.parents = sl.parents.slice(startIndex, endIndex);\n        // }\n      }\n      );\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/mrsmith/workspace/angular-4/sp/src/app/parents/parent.component.ts","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { MatPaginatorModule } from '@angular/material';\n\nimport { BasicComponent } from './../commons/layout/basic/basic.component';\nimport { LayoutModule } from './../commons/layout/layout.module';\nimport { WidgetModule } from '../commons/widget/widget.module';\nimport { ParentComponent } from './parent.component';\nimport { PagerService } from './../services/pager.service';\n\nexport const ROUTES: Routes = [\n  {\n    path: '',\n    component: BasicComponent,\n    children: [\n      {\n        path: '',\n        component: ParentComponent\n      }\n    ]\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    LayoutModule,\n    MatPaginatorModule,\n    WidgetModule,\n    RouterModule.forChild(ROUTES)\n  ],\n  declarations: [ParentComponent],\n  providers: [\n    PagerService\n  ]\n})\nexport class ParentsModule { }\n\n\n\n// WEBPACK FOOTER //\n// /home/mrsmith/workspace/angular-4/sp/src/app/parents/parents.module.ts"],"sourceRoot":"webpack:///"}